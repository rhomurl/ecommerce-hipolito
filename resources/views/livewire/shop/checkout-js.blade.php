<script>
paypal.Buttons({onCancel:function(b,a){a.redirect("{{ route('checkout.confirm', $this->orderidz) }}")},createOrder:function(a,b){return fetch("/api/paypal/order/create/",{method:"POST",body:JSON.stringify({total:"{{ $this->grandTotal }}"})}).then(function(a){return a.json()}).then(function(a){return a.id})},onApprove:function(a,b){return fetch("/api/paypal/order/capture/",{method:"POST",body:JSON.stringify({paypal_orderid:a.orderID,user_orderid:"{{ $this->orderidz }}",user_id:"{{ auth()->user()->id }}"})}).then(function(a){return a.json()}).then(function(a){if(a.error&&"INSTRUMENT_DECLINED"==a.error.details[0].issue)return b.restart();"COMPLETED"===a.status&&b.redirect("{{ route('checkout.success', $this->orderidz) }}")})}}).render("#paypal-button-container")
</script>